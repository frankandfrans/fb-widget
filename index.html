<!DOCTYPE html>
<html>
<head>
    <title>Frank & Fran's Fishing Report</title>
    <style>
        body { font-family: Arial; margin: 0; background: #eef4fa; color: #001d4a; text-align: center; }
        h1 { padding: 20px; }
        #content { display: flex; justify-content: space-around; align-items: center; height: 90vh; }
        #text { flex: 1; font-size: 2vw; padding: 20px; overflow-y: auto; }
        #photos { flex: 1; }
        #photos img { max-width: 100%; max-height: 80vh; display: none; }
        #photos img.active { display: block; }
    </style>
</head>
<body>
    <h1>Frank & Fran's Fishing Report</h1>
    <div id="content">
        <div id="text">Loading...</div>
        <div id="photos"></div>
    </div>
    <script>
        async function fetchPosts() {
            const res = await fetch('/fb-posts');
            const posts = await res.json();
            if (!posts.length) {
                document.getElementById('text').innerText = 'Failed to load posts. Please refresh.';
                return;
            }
            document.getElementById('text').innerText = posts[0].text;
            posts[0].images.forEach(url => {
                const img = document.createElement('img');
                img.src = url;
                document.getElementById('photos').appendChild(img);
            });
            let index = 0;
            const imgs = document.querySelectorAll('#photos img');
            if (imgs.length) imgs[0].classList.add('active');
            setInterval(() => {
                imgs[index].classList.remove('active');
                index = (index + 1) % imgs.length;
                imgs[index].classList.add('active');
            }, 5000);
        }
        fetchPosts();
    </script>
</body>
</html>
